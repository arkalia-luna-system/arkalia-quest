<!DOCTYPE html>
<html lang="fr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test des Am√©liorations UX - Arkalia Quest</title>
    <style>
        body {
            font-family: 'Courier New', monospace;
            background: linear-gradient(135deg, #001100, #003300);
            color: #00ff00;
            margin: 0;
            padding: 20px;
        }

        .test-container {
            max-width: 1200px;
            margin: 0 auto;
        }

        .test-section {
            background: rgba(0, 255, 0, 0.1);
            border: 2px solid #00ff00;
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
        }

        .test-title {
            color: #00ff00;
            font-size: 1.5rem;
            margin-bottom: 15px;
            text-align: center;
        }

        .test-button {
            background: linear-gradient(45deg, #00ff00, #0080ff);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 25px;
            cursor: pointer;
            margin: 5px;
            font-weight: bold;
            transition: all 0.3s ease;
        }

        .test-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 255, 0, 0.3);
        }

        .test-result {
            background: #000;
            border: 1px solid #00ff00;
            border-radius: 5px;
            padding: 10px;
            margin: 10px 0;
            font-family: 'Courier New', monospace;
            font-size: 0.9rem;
        }

        .success {
            color: #00ff00;
        }

        .error {
            color: #ff0000;
        }

        .info {
            color: #0080ff;
        }
    </style>
</head>

<body>
    <div class="test-container">
        <h1 class="test-title">üß™ Test des Am√©liorations UX - Arkalia Quest V3.3.0</h1>

        <!-- Test du syst√®me de feedback contextuel -->
        <div class="test-section">
            <h2 class="test-title">üí¨ Syst√®me de Feedback Contextuel</h2>
            <button class="test-button" onclick="testContextualFeedback()">Tester le Feedback</button>
            <button class="test-button" onclick="testEasterEggs()">Tester les Easter Eggs</button>
            <div id="feedback-result" class="test-result"></div>
        </div>

        <!-- Test des animations de progression -->
        <div class="test-section">
            <h2 class="test-title">üé¨ Animations de Progression</h2>
            <button class="test-button" onclick="testProgressionAnimations()">Tester les Animations</button>
            <button class="test-button" onclick="testVictoryEffect()">Tester l'Effet de Victoire</button>
            <div id="animation-result" class="test-result"></div>
        </div>

        <!-- Test des mini-jeux interactifs -->
        <div class="test-section">
            <h2 class="test-title">üéÆ Mini-Jeux Interactifs</h2>
            <button class="test-button" onclick="testMiniGames()">Tester les Mini-Jeux</button>
            <button class="test-button" onclick="testGameInterface()">Tester l'Interface</button>
            <div id="minigame-result" class="test-result"></div>
        </div>

        <!-- Test des empty states am√©lior√©s -->
        <div class="test-section">
            <h2 class="test-title">üåü Empty States Am√©lior√©s</h2>
            <button class="test-button" onclick="testEmptyStates()">Tester les Empty States</button>
            <button class="test-button" onclick="testEmptyStateAnimations()">Tester les Animations</button>
            <div id="emptystate-result" class="test-result"></div>
        </div>

        <!-- Test des profils de joueurs -->
        <div class="test-section">
            <h2 class="test-title">üë§ Profils de Joueurs Avanc√©s</h2>
            <button class="test-button" onclick="testPlayerProfiles()">Tester les Profils</button>
            <button class="test-button" onclick="testProfileAdaptation()">Tester l'Adaptation</button>
            <div id="profile-result" class="test-result"></div>
        </div>

        <!-- Test d'int√©gration terminal -->
        <div class="test-section">
            <h2 class="test-title">üîó Int√©gration Terminal</h2>
            <button class="test-button" onclick="testTerminalIntegration()">Tester l'Int√©gration</button>
            <button class="test-button" onclick="testLunaCommands()">Tester les Commandes LUNA</button>
            <div id="terminal-result" class="test-result"></div>
        </div>

        <!-- R√©sultats globaux -->
        <div class="test-section">
            <h2 class="test-title">üìä R√©sultats Globaux</h2>
            <button class="test-button" onclick="runAllTests()">Lancer Tous les Tests</button>
            <button class="test-button" onclick="generateReport()">G√©n√©rer le Rapport</button>
            <div id="global-result" class="test-result"></div>
        </div>
    </div>

    <!-- Scripts de test -->
    <script>
        // Variables de test
        let testResults = {
            contextualFeedback: false,
            progressionAnimations: false,
            miniGames: false,
            emptyStates: false,
            playerProfiles: false,
            terminalIntegration: false
        };

        // Test du syst√®me de feedback contextuel
        function testContextualFeedback() {
            const result = document.getElementById('feedback-result');
            result.innerHTML = 'üîÑ Test du syst√®me de feedback contextuel...';

            try {
                // V√©rifier si le syst√®me est charg√©
                if (typeof window.contextualFeedback !== 'undefined') {
                    // Tester la g√©n√©ration de feedback
                    const feedback = window.contextualFeedback.getFeedback('aide', { success: true });

                    if (feedback && feedback.length > 0) {
                        result.innerHTML = `<div class="success">‚úÖ Syst√®me de feedback contextuel fonctionnel</div>
                                          <div class="info">Feedback g√©n√©r√©: "${feedback}"</div>`;
                        testResults.contextualFeedback = true;
                    } else {
                        result.innerHTML = '<div class="error">‚ùå Erreur: Aucun feedback g√©n√©r√©</div>';
                    }
                } else {
                    result.innerHTML = '<div class="error">‚ùå Erreur: Syst√®me de feedback contextuel non charg√©</div>';
                }
            } catch (error) {
                result.innerHTML = `<div class="error">‚ùå Erreur: ${error.message}</div>`;
            }
        }

        // Test des easter eggs
        function testEasterEggs() {
            const result = document.getElementById('feedback-result');
            result.innerHTML = 'üîÑ Test des easter eggs...';

            try {
                if (typeof window.contextualFeedback !== 'undefined') {
                    // Tester la d√©tection d'easter eggs
                    const easterEggs = ['konami', 'matrix', 'luna dance', 'hack the planet', 'luna love'];
                    let detectedEggs = 0;

                    easterEggs.forEach(egg => {
                        if (window.contextualFeedback.detectEasterEgg(egg)) {
                            detectedEggs++;
                        }
                    });

                    if (detectedEggs > 0) {
                        result.innerHTML = `<div class="success">‚úÖ ${detectedEggs} easter eggs d√©tect√©s</div>
                                          <div class="info">Easter eggs test√©s: ${easterEggs.join(', ')}</div>`;
                    } else {
                        result.innerHTML = '<div class="error">‚ùå Aucun easter egg d√©tect√©</div>';
                    }
                } else {
                    result.innerHTML = '<div class="error">‚ùå Erreur: Syst√®me de feedback contextuel non charg√©</div>';
                }
            } catch (error) {
                result.innerHTML = `<div class="error">‚ùå Erreur: ${error.message}</div>`;
            }
        }

        // Test des animations de progression
        function testProgressionAnimations() {
            const result = document.getElementById('animation-result');
            result.innerHTML = 'üîÑ Test des animations de progression...';

            try {
                if (typeof window.progressionAnimations !== 'undefined') {
                    // Tester le d√©clenchement d'animations
                    const testElement = document.createElement('div');
                    testElement.id = 'test-animation-element';
                    testElement.style.cssText = 'width: 100px; height: 100px; background: #00ff00; margin: 10px;';
                    document.body.appendChild(testElement);

                    // Tester diff√©rentes animations
                    window.progressionAnimations.triggerAnimation('confetti', testElement);
                    window.progressionAnimations.triggerAnimation('particles', testElement);

                    setTimeout(() => {
                        document.body.removeChild(testElement);
                        result.innerHTML = '<div class="success">‚úÖ Animations de progression fonctionnelles</div>';
                        testResults.progressionAnimations = true;
                    }, 1000);
                } else {
                    result.innerHTML = '<div class="error">‚ùå Erreur: Syst√®me d\'animations non charg√©</div>';
                }
            } catch (error) {
                result.innerHTML = `<div class="error">‚ùå Erreur: ${error.message}</div>`;
            }
        }

        // Test de l'effet de victoire
        function testVictoryEffect() {
            const result = document.getElementById('animation-result');
            result.innerHTML = 'üîÑ Test de l\'effet de victoire...';

            try {
                if (typeof window.progressionAnimations !== 'undefined') {
                    const testElement = document.createElement('div');
                    testElement.id = 'test-victory-element';
                    testElement.style.cssText = 'width: 200px; height: 100px; background: #0080ff; margin: 10px;';
                    document.body.appendChild(testElement);

                    window.progressionAnimations.createVictoryEffect(testElement);

                    setTimeout(() => {
                        document.body.removeChild(testElement);
                        result.innerHTML = '<div class="success">‚úÖ Effet de victoire fonctionnel</div>';
                    }, 2000);
                } else {
                    result.innerHTML = '<div class="error">‚ùå Erreur: Syst√®me d\'animations non charg√©</div>';
                }
            } catch (error) {
                result.innerHTML = `<div class="error">‚ùå Erreur: ${error.message}</div>`;
            }
        }

        // Test des mini-jeux interactifs
        function testMiniGames() {
            const result = document.getElementById('minigame-result');
            result.innerHTML = 'üîÑ Test des mini-jeux interactifs...';

            try {
                if (typeof window.interactiveMiniGames !== 'undefined') {
                    // V√©rifier que les jeux sont disponibles
                    const availableGames = Object.keys(window.interactiveMiniGames.games);

                    if (availableGames.length > 0) {
                        result.innerHTML = `<div class="success">‚úÖ ${availableGames.length} mini-jeux disponibles</div>
                                          <div class="info">Jeux: ${availableGames.join(', ')}</div>`;
                        testResults.miniGames = true;
                    } else {
                        result.innerHTML = '<div class="error">‚ùå Aucun mini-jeu disponible</div>';
                    }
                } else {
                    result.innerHTML = '<div class="error">‚ùå Erreur: Syst√®me de mini-jeux non charg√©</div>';
                }
            } catch (error) {
                result.innerHTML = `<div class="error">‚ùå Erreur: ${error.message}</div>`;
            }
        }

        // Test de l'interface des jeux
        function testGameInterface() {
            const result = document.getElementById('minigame-result');
            result.innerHTML = 'üîÑ Test de l\'interface des jeux...';

            try {
                if (typeof window.interactiveMiniGames !== 'undefined') {
                    // Tester l'ouverture d'un jeu
                    window.interactiveMiniGames.startGame('logic_puzzle_1');

                    setTimeout(() => {
                        const gameContainer = document.getElementById('mini-games-container');
                        if (gameContainer && gameContainer.style.display !== 'none') {
                            result.innerHTML = '<div class="success">‚úÖ Interface des jeux fonctionnelle</div>';
                            window.interactiveMiniGames.closeGame();
                        } else {
                            result.innerHTML = '<div class="error">‚ùå Interface des jeux non affich√©e</div>';
                        }
                    }, 500);
                } else {
                    result.innerHTML = '<div class="error">‚ùå Erreur: Syst√®me de mini-jeux non charg√©</div>';
                }
            } catch (error) {
                result.innerHTML = `<div class="error">‚ùå Erreur: ${error.message}</div>`;
            }
        }

        // Test des empty states am√©lior√©s
        function testEmptyStates() {
            const result = document.getElementById('emptystate-result');
            result.innerHTML = 'üîÑ Test des empty states am√©lior√©s...';

            try {
                if (typeof window.enhancedEmptyStates !== 'undefined') {
                    // Cr√©er un conteneur vide pour tester
                    const testContainer = document.createElement('div');
                    testContainer.className = 'missions';
                    testContainer.innerHTML = '';
                    document.body.appendChild(testContainer);

                    // Tester l'am√©lioration des empty states
                    window.enhancedEmptyStates.enhanceEmptyState(testContainer);

                    setTimeout(() => {
                        if (testContainer.querySelector('.enhanced-empty-state')) {
                            result.innerHTML = '<div class="success">‚úÖ Empty states am√©lior√©s fonctionnels</div>';
                            testResults.emptyStates = true;
                        } else {
                            result.innerHTML = '<div class="error">‚ùå Empty states non am√©lior√©s</div>';
                        }
                        document.body.removeChild(testContainer);
                    }, 500);
                } else {
                    result.innerHTML = '<div class="error">‚ùå Erreur: Syst√®me d\'empty states non charg√©</div>';
                }
            } catch (error) {
                result.innerHTML = `<div class="error">‚ùå Erreur: ${error.message}</div>`;
            }
        }

        // Test des animations d'empty states
        function testEmptyStateAnimations() {
            const result = document.getElementById('emptystate-result');
            result.innerHTML = 'üîÑ Test des animations d\'empty states...';

            try {
                if (typeof window.enhancedEmptyStates !== 'undefined') {
                    // Tester les animations
                    const testElement = document.createElement('div');
                    testElement.className = 'enhanced-empty-state bounce';
                    testElement.innerHTML = 'Test d\'animation';
                    document.body.appendChild(testElement);

                    setTimeout(() => {
                        document.body.removeChild(testElement);
                        result.innerHTML = '<div class="success">‚úÖ Animations d\'empty states fonctionnelles</div>';
                    }, 2000);
                } else {
                    result.innerHTML = '<div class="error">‚ùå Erreur: Syst√®me d\'empty states non charg√©</div>';
                }
            } catch (error) {
                result.innerHTML = `<div class="error">‚ùå Erreur: ${error.message}</div>`;
            }
        }

        // Test des profils de joueurs
        function testPlayerProfiles() {
            const result = document.getElementById('profile-result');
            result.innerHTML = 'üîÑ Test des profils de joueurs...';

            try {
                if (typeof window.advancedPlayerProfiles !== 'undefined') {
                    // V√©rifier le profil actuel
                    const currentProfile = window.advancedPlayerProfiles.getCurrentProfile();

                    if (currentProfile && currentProfile.name) {
                        result.innerHTML = `<div class="success">‚úÖ Profil d√©tect√©: ${currentProfile.name}</div>
                                          <div class="info">Niveau d'adaptation: ${currentProfile.level.toFixed(2)}</div>`;
                        testResults.playerProfiles = true;
                    } else {
                        result.innerHTML = '<div class="error">‚ùå Aucun profil d√©tect√©</div>';
                    }
                } else {
                    result.innerHTML = '<div class="error">‚ùå Erreur: Syst√®me de profils non charg√©</div>';
                }
            } catch (error) {
                result.innerHTML = `<div class="error">‚ùå Erreur: ${error.message}</div>`;
            }
        }

        // Test de l'adaptation des profils
        function testProfileAdaptation() {
            const result = document.getElementById('profile-result');
            result.innerHTML = 'üîÑ Test de l\'adaptation des profils...';

            try {
                if (typeof window.advancedPlayerProfiles !== 'undefined') {
                    // Tester le changement de profil
                    const profiles = ['debutant', 'experimente', 'competitif', 'creatif', 'casual'];
                    const randomProfile = profiles[Math.floor(Math.random() * profiles.length)];

                    window.advancedPlayerProfiles.switchProfile(randomProfile);

                    setTimeout(() => {
                        const currentProfile = window.advancedPlayerProfiles.getCurrentProfile();
                        if (currentProfile.name === randomProfile) {
                            result.innerHTML = `<div class="success">‚úÖ Adaptation des profils fonctionnelle</div>
                                              <div class="info">Profil chang√© vers: ${randomProfile}</div>`;
                        } else {
                            result.innerHTML = '<div class="error">‚ùå Changement de profil √©chou√©</div>';
                        }
                    }, 500);
                } else {
                    result.innerHTML = '<div class="error">‚ùå Erreur: Syst√®me de profils non charg√©</div>';
                }
            } catch (error) {
                result.innerHTML = `<div class="error">‚ùå Erreur: ${error.message}</div>`;
            }
        }

        // Test de l'int√©gration terminal
        function testTerminalIntegration() {
            const result = document.getElementById('terminal-result');
            result.innerHTML = 'üîÑ Test de l\'int√©gration terminal...';

            try {
                if (typeof window.terminalIntegration !== 'undefined') {
                    // Tester l'int√©gration
                    result.innerHTML = '<div class="success">‚úÖ Int√©gration terminal fonctionnelle</div>';
                    testResults.terminalIntegration = true;
                } else {
                    result.innerHTML = '<div class="error">‚ùå Erreur: Int√©gration terminal non charg√©e</div>';
                }
            } catch (error) {
                result.innerHTML = `<div class="error">‚ùå Erreur: ${error.message}</div>`;
            }
        }

        // Test des commandes LUNA
        function testLunaCommands() {
            const result = document.getElementById('terminal-result');
            result.innerHTML = 'üîÑ Test des commandes LUNA...';

            try {
                if (typeof window.terminalIntegration !== 'undefined') {
                    // Tester les commandes LUNA
                    const lunaCommands = ['luna help', 'luna status', 'luna dance', 'luna love'];
                    let workingCommands = 0;

                    lunaCommands.forEach(command => {
                        try {
                            window.terminalIntegration.checkAdditionalEasterEggs(command);
                            workingCommands++;
                        } catch (e) {
                            // Commande non reconnue
                        }
                    });

                    if (workingCommands > 0) {
                        result.innerHTML = `<div class="success">‚úÖ ${workingCommands} commandes LUNA fonctionnelles</div>
                                          <div class="info">Commandes test√©es: ${lunaCommands.join(', ')}</div>`;
                    } else {
                        result.innerHTML = '<div class="error">‚ùå Aucune commande LUNA fonctionnelle</div>';
                    }
                } else {
                    result.innerHTML = '<div class="error">‚ùå Erreur: Int√©gration terminal non charg√©e</div>';
                }
            } catch (error) {
                result.innerHTML = `<div class="error">‚ùå Erreur: ${error.message}</div>`;
            }
        }

        // Lancer tous les tests
        function runAllTests() {
            const result = document.getElementById('global-result');
            result.innerHTML = 'üîÑ Lancement de tous les tests...';

            // R√©initialiser les r√©sultats
            testResults = {
                contextualFeedback: false,
                progressionAnimations: false,
                miniGames: false,
                emptyStates: false,
                playerProfiles: false,
                terminalIntegration: false
            };

            // Lancer les tests s√©quentiellement
            setTimeout(() => testContextualFeedback(), 100);
            setTimeout(() => testProgressionAnimations(), 200);
            setTimeout(() => testMiniGames(), 300);
            setTimeout(() => testEmptyStates(), 400);
            setTimeout(() => testPlayerProfiles(), 500);
            setTimeout(() => testTerminalIntegration(), 600);

            // Afficher les r√©sultats apr√®s 2 secondes
            setTimeout(() => {
                const passedTests = Object.values(testResults).filter(Boolean).length;
                const totalTests = Object.keys(testResults).length;

                result.innerHTML = `<div class="success">‚úÖ Tests termin√©s: ${passedTests}/${totalTests} r√©ussis</div>
                                  <div class="info">D√©tails: ${JSON.stringify(testResults, null, 2)}</div>`;
            }, 2000);
        }

        // G√©n√©rer le rapport
        function generateReport() {
            const result = document.getElementById('global-result');
            const passedTests = Object.values(testResults).filter(Boolean).length;
            const totalTests = Object.keys(testResults).length;
            const successRate = ((passedTests / totalTests) * 100).toFixed(1);

            result.innerHTML = `
                <div class="success">üìä RAPPORT DE TEST - Arkalia Quest V3.3.0</div>
                <div class="info">
                    <strong>R√©sultats globaux:</strong><br>
                    ‚Ä¢ Tests r√©ussis: ${passedTests}/${totalTests}<br>
                    ‚Ä¢ Taux de r√©ussite: ${successRate}%<br><br>
                    
                    <strong>D√©tails par syst√®me:</strong><br>
                    ‚Ä¢ Feedback contextuel: ${testResults.contextualFeedback ? '‚úÖ' : '‚ùå'}<br>
                    ‚Ä¢ Animations de progression: ${testResults.progressionAnimations ? '‚úÖ' : '‚ùå'}<br>
                    ‚Ä¢ Mini-jeux interactifs: ${testResults.miniGames ? '‚úÖ' : '‚ùå'}<br>
                    ‚Ä¢ Empty states am√©lior√©s: ${testResults.emptyStates ? '‚úÖ' : '‚ùå'}<br>
                    ‚Ä¢ Profils de joueurs: ${testResults.playerProfiles ? '‚úÖ' : '‚ùå'}<br>
                    ‚Ä¢ Int√©gration terminal: ${testResults.terminalIntegration ? '‚úÖ' : '‚ùå'}<br><br>
                    
                    <strong>Statut:</strong> ${successRate >= 80 ? 'üü¢ EXCELLENT' : successRate >= 60 ? 'üü° BON' : 'üî¥ √Ä AM√âLIORER'}
                </div>
            `;
        }

        // Initialisation
        document.addEventListener('DOMContentLoaded', function () {
            console.log('üß™ Page de test des am√©liorations UX charg√©e');

            // V√©rifier que les syst√®mes sont charg√©s
            setTimeout(() => {
                const systems = [
                    'contextualFeedback',
                    'progressionAnimations',
                    'interactiveMiniGames',
                    'enhancedEmptyStates',
                    'terminalIntegration',
                    'advancedPlayerProfiles'
                ];

                const loadedSystems = systems.filter(system => typeof window[system] !== 'undefined');
                console.log(`‚úÖ ${loadedSystems.length}/${systems.length} syst√®mes charg√©s:`, loadedSystems);
            }, 1000);
        });
    </script>
</body>

</html>