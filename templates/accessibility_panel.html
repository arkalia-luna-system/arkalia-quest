<!DOCTYPE html>
<html lang="fr">

<head>
    <meta charset="UTF-8">
    <title>‚ôø ARKALIA QUEST - ACCESSIBILIT√â</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- PWA Meta Tags -->
    <meta name="description" content="Panneau d'accessibilit√© pour Arkalia Quest. Personnalise ton exp√©rience de jeu.">
    <meta name="theme-color" content="#a78bfa">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">

    <!-- PWA Icons -->
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <link rel="apple-touch-icon" href="/static/images/apple-touch-icon.png">
    <link rel="manifest" href="/static/manifest.json">

    <!-- CSS LUNA VISION -->
    <link rel="stylesheet" href="/static/css/arkalia-luna-vision.css">
    <link rel="stylesheet" href="/static/css/accessibility.css">
    <link rel="stylesheet" href="/static/css/responsive.css">

    <style>
        .accessibility-workspace {
            min-height: 100vh;
            background: linear-gradient(135deg, rgba(9, 9, 11, 0.95) 0%, rgba(30, 30, 40, 0.95) 100%);
            position: relative;
            overflow: hidden;
        }

        .accessibility-background {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background:
                radial-gradient(circle at 30% 70%, rgba(167, 139, 250, 0.08) 0%, transparent 50%),
                radial-gradient(circle at 70% 30%, rgba(96, 165, 250, 0.08) 0%, transparent 50%);
            animation: accessibilityAmbient 12s ease-in-out infinite;
        }

        @keyframes accessibilityAmbient {

            0%,
            100% {
                opacity: 0.4;
                transform: scale(1);
            }

            50% {
                opacity: 0.7;
                transform: scale(1.03);
            }
        }

        .accessibility-container {
            padding: 30px 20px;
            position: relative;
            z-index: 2;
        }

        .accessibility-header {
            text-align: center;
            margin-bottom: 40px;
            position: relative;
        }

        .accessibility-title {
            font-family: 'Cormorant', serif;
            font-size: 3em;
            font-weight: 700;
            color: var(--violet-lunaire);
            text-shadow: 0 0 30px rgba(167, 139, 250, 0.6);
            margin-bottom: 15px;
            opacity: 0;
            animation: fadeInUp 1.5s ease-out 0.5s forwards;
        }

        .accessibility-subtitle {
            font-family: 'Inter', sans-serif;
            font-size: 1.2em;
            color: var(--argent-holographique);
            opacity: 0;
            animation: fadeInUp 1.5s ease-out 1s forwards;
        }

        .accessibility-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 25px;
            margin-bottom: 30px;
        }

        .accessibility-card {
            background: rgba(9, 9, 11, 0.9);
            border: 2px solid rgba(167, 139, 250, 0.3);
            border-radius: 15px;
            padding: 25px;
            backdrop-filter: blur(15px);
            transition: all 0.3s ease;
        }

        .accessibility-card:hover {
            border-color: rgba(167, 139, 250, 0.6);
            box-shadow: 0 0 30px rgba(167, 139, 250, 0.2);
            transform: translateY(-2px);
        }

        .accessibility-card-header {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 20px;
        }

        .accessibility-card-icon {
            font-size: 2em;
            color: var(--violet-lunaire);
        }

        .accessibility-card-title {
            font-family: 'Cormorant', serif;
            font-size: 1.4em;
            font-weight: 600;
            color: var(--violet-lunaire);
            margin: 0;
        }

        .accessibility-controls {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .control-group {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px 0;
            border-bottom: 1px solid rgba(167, 139, 250, 0.1);
        }

        .control-label {
            font-family: 'Inter', sans-serif;
            font-size: 0.95em;
            color: var(--argent-holographique);
        }

        .control-input {
            background: rgba(167, 139, 250, 0.1);
            border: 1px solid rgba(167, 139, 250, 0.3);
            border-radius: 8px;
            padding: 8px 12px;
            color: var(--argent-holographique);
            font-family: 'IBM Plex Mono', monospace;
        }

        .control-toggle {
            position: relative;
            width: 50px;
            height: 24px;
            background: rgba(167, 139, 250, 0.2);
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .control-toggle.active {
            background: var(--violet-lunaire);
        }

        .control-toggle::after {
            content: '';
            position: absolute;
            top: 2px;
            left: 2px;
            width: 20px;
            height: 20px;
            background: white;
            border-radius: 50%;
            transition: all 0.3s ease;
        }

        .control-toggle.active::after {
            transform: translateX(26px);
        }

        .accessibility-actions {
            text-align: center;
            margin-top: 40px;
        }

        .accessibility-btn {
            font-family: 'IBM Plex Mono', monospace;
            font-size: 1.1em;
            padding: 15px 30px;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
            border: none;
            margin: 0 10px;
        }

        .btn-primary {
            background: var(--violet-lunaire);
            color: white;
            box-shadow: 0 0 20px rgba(167, 139, 250, 0.4);
        }

        .btn-primary:hover {
            background: var(--bleu-spectre);
            box-shadow: 0 0 30px rgba(96, 165, 250, 0.5);
            transform: translateY(-3px);
        }

        .btn-secondary {
            background: rgba(167, 139, 250, 0.2);
            color: var(--argent-holographique);
            border: 1px solid rgba(167, 139, 250, 0.4);
        }

        .btn-secondary:hover {
            background: rgba(167, 139, 250, 0.3);
            border-color: rgba(167, 139, 250, 0.6);
        }

        .luna-accessibility-guide {
            position: fixed;
            bottom: 20px;
            left: 20px;
            background: rgba(167, 139, 250, 0.1);
            border: 1px solid rgba(167, 139, 250, 0.3);
            border-radius: 10px;
            padding: 15px;
            max-width: 300px;
            opacity: 0;
            animation: fadeIn 2s ease-out 2s forwards;
        }

        .luna-accessibility-guide::before {
            content: 'üåô LUNA:';
            font-weight: bold;
            color: var(--violet-lunaire);
            margin-right: 8px;
        }

        @media (max-width: 768px) {
            .accessibility-title {
                font-size: 2.2em;
            }

            .accessibility-grid {
                grid-template-columns: 1fr;
                gap: 20px;
            }

            .accessibility-actions {
                display: flex;
                flex-direction: column;
                gap: 15px;
                align-items: center;
            }

            .accessibility-btn {
                width: 100%;
                max-width: 300px;
            }

            .luna-accessibility-guide {
                position: static;
                margin: 20px auto;
                max-width: none;
            }
        }
    </style>
</head>

<body>
    <!-- Navigation principale -->
    <div class="nav-wrapper">
        <nav class="main-nav">
            <div class="nav-container">
                <div class="nav-logo">ARKALIA QUEST</div>
                <div class="nav-links">
                    <a href="/" class="nav-link">üè† ACCUEIL</a>
                    <a href="/terminal" class="nav-link">‚å®Ô∏è TERMINAL</a>
                    <a href="/monde" class="nav-link">üåç MONDE</a>
                    <a href="/profil" class="nav-link">üë§ PROFIL</a>
                    <a href="/leaderboard" class="nav-link">üèÜ CLASSEMENT</a>
                    <a href="/dashboard" class="nav-link">üìä DASHBOARD</a>
                    <a href="/accessibility" class="nav-link active">‚ôø ACCESSIBILIT√â</a>
                </div>
            </div>
        </nav>
    </div>

    <main id="main-content" class="accessibility-workspace">
        <!-- Fond anim√© de l'accessibilit√© -->
        <div class="accessibility-background" aria-hidden="true"></div>

        <div class="accessibility-container">
            <!-- En-t√™te de l'accessibilit√© -->
            <div class="accessibility-header">
                <h1 class="accessibility-title" id="accessibility-title">‚ôø ACCESSIBILIT√â</h1>
                <p class="accessibility-subtitle" id="accessibility-subtitle">Personnalise ton exp√©rience de jeu</p>
            </div>

            <!-- Grille des options d'accessibilit√© -->
            <div class="accessibility-grid">
                <!-- Carte Visuelle -->
                <div class="accessibility-card">
                    <div class="accessibility-card-header">
                        <span class="accessibility-card-icon">üëÅÔ∏è</span>
                        <h3 class="accessibility-card-title">Options Visuelles</h3>
                    </div>
                    <div class="accessibility-controls">
                        <div class="control-group">
                            <span class="control-label">Contraste √©lev√©</span>
                            <div class="control-toggle" id="high-contrast" onclick="toggleControl(this)"></div>
                        </div>
                        <div class="control-group">
                            <span class="control-label">Taille du texte</span>
                            <select class="control-input" id="font-size">
                                <option value="small">Petit</option>
                                <option value="medium" selected>Moyen</option>
                                <option value="large">Grand</option>
                                <option value="xlarge">Tr√®s grand</option>
                            </select>
                        </div>
                        <div class="control-group">
                            <span class="control-label">Animations r√©duites</span>
                            <div class="control-toggle" id="reduced-motion" onclick="toggleControl(this)"></div>
                        </div>
                    </div>
                </div>

                <!-- Carte Audio -->
                <div class="accessibility-card">
                    <div class="accessibility-card-header">
                        <span class="accessibility-card-icon">üîä</span>
                        <h3 class="accessibility-card-title">Options Audio</h3>
                    </div>
                    <div class="accessibility-controls">
                        <div class="control-group">
                            <span class="control-label">Sous-titres</span>
                            <div class="control-toggle active" id="subtitles" onclick="toggleControl(this)"></div>
                        </div>
                        <div class="control-group">
                            <span class="control-label">Volume des effets</span>
                            <input type="range" class="control-input" id="effects-volume" min="0" max="100" value="80">
                        </div>
                        <div class="control-group">
                            <span class="control-label">Audio descriptif</span>
                            <div class="control-toggle" id="audio-description" onclick="toggleControl(this)"></div>
                        </div>
                    </div>
                </div>

                <!-- Carte Navigation -->
                <div class="accessibility-card">
                    <div class="accessibility-card-header">
                        <span class="control-label">‚å®Ô∏è</span>
                        <h3 class="accessibility-card-title">Navigation</h3>
                    </div>
                    <div class="accessibility-controls">
                        <div class="control-group">
                            <span class="control-label">Navigation clavier</span>
                            <div class="control-toggle active" id="keyboard-nav" onclick="toggleControl(this)"></div>
                        </div>
                        <div class="control-group">
                            <span class="control-label">Focus visible</span>
                            <div class="control-toggle active" id="focus-visible" onclick="toggleControl(this)"></div>
                        </div>
                        <div class="control-group">
                            <span class="control-label">Raccourcis clavier</span>
                            <div class="control-toggle" id="keyboard-shortcuts" onclick="toggleControl(this)"></div>
                        </div>
                    </div>
                </div>

                <!-- Carte Interface -->
                <div class="accessibility-card">
                    <div class="accessibility-card-header">
                        <span class="accessibility-card-icon">üéõÔ∏è</span>
                        <h3 class="accessibility-card-title">Interface</h3>
                    </div>
                    <div class="accessibility-controls">
                        <div class="control-group">
                            <span class="control-label">Mode sombre</span>
                            <div class="control-toggle active" id="dark-mode" onclick="toggleControl(this)"></div>
                        </div>
                        <div class="control-group">
                            <span class="control-label">Espacement des √©l√©ments</span>
                            <select class="control-input" id="element-spacing">
                                <option value="compact">Compact</option>
                                <option value="normal" selected>Normal</option>
                                <option value="spacious">Spacieux</option>
                            </select>
                        </div>
                        <div class="control-group">
                            <span class="control-label">Curseur personnalis√©</span>
                            <div class="control-toggle" id="custom-cursor" onclick="toggleControl(this)"></div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Actions -->
            <div class="accessibility-actions">
                <button class="accessibility-btn btn-primary" onclick="saveAccessibilitySettings()">üíæ
                    SAUVEGARDER</button>
                <button class="accessibility-btn btn-secondary" onclick="resetAccessibilitySettings()">üîÑ
                    R√âINITIALISER</button>
                <button class="accessibility-btn btn-secondary" onclick="testAccessibilitySettings()">üß™ TESTER</button>
            </div>
        </div>

        <!-- Guide LUNA -->
        <div class="luna-accessibility-guide" id="luna-accessibility-guide" aria-live="polite">
            Personnalise ton exp√©rience pour qu'elle te convienne parfaitement...
        </div>
    </main>

    <!-- Scripts LUNA VISION -->
    <script src="/static/js/arkalia-luna-vision.js"></script>
    <script src="/static/js/accessibility.js"></script>
    <script src="/static/js/audio-manager.js"></script>

    <script>
        // Gestion des contr√¥les d'accessibilit√©
        function toggleControl(element) {
            element.classList.toggle('active');
            updateAccessibilitySettings();
        }

        function updateAccessibilitySettings() {
            const settings = {
                highContrast: document.getElementById('high-contrast').classList.contains('active'),
                fontSize: document.getElementById('font-size').value,
                reducedMotion: document.getElementById('reduced-motion').classList.contains('active'),
                subtitles: document.getElementById('subtitles').classList.contains('active'),
                effectsVolume: document.getElementById('effects-volume').value,
                audioDescription: document.getElementById('audio-description').classList.contains('active'),
                keyboardNav: document.getElementById('keyboard-nav').classList.contains('active'),
                focusVisible: document.getElementById('focus-visible').classList.contains('active'),
                keyboardShortcuts: document.getElementById('keyboard-shortcuts').classList.contains('active'),
                darkMode: document.getElementById('dark-mode').classList.contains('active'),
                elementSpacing: document.getElementById('element-spacing').value,
                customCursor: document.getElementById('custom-cursor').classList.contains('active')
            };

            // Appliquer les param√®tres
            applyAccessibilitySettings(settings);

            // Sauvegarder localement
            localStorage.setItem('arkalia-accessibility', JSON.stringify(settings));
        }

        function applyAccessibilitySettings(settings) {
            // Contraste √©lev√©
            if (settings.highContrast) {
                document.body.style.filter = 'contrast(1.5)';
            } else {
                document.body.style.filter = 'none';
            }

            // Taille du texte
            const fontSizeMap = {
                'small': '14px',
                'medium': '16px',
                'large': '18px',
                'xlarge': '20px'
            };
            document.body.style.fontSize = fontSizeMap[settings.fontSize];

            // Animations r√©duites
            if (settings.reducedMotion) {
                document.body.style.setProperty('--animation-duration', '0.1s');
            } else {
                document.body.style.setProperty('--animation-duration', '0.3s');
            }

            // Mode sombre
            if (settings.darkMode) {
                document.body.classList.add('dark-mode');
            } else {
                document.body.classList.remove('dark-mode');
            }

            // Espacement des √©l√©ments
            const spacingMap = {
                'compact': '0.5',
                'normal': '1',
                'spacious': '1.5'
            };
            document.body.style.setProperty('--element-spacing', spacingMap[settings.elementSpacing]);
        }

        function saveAccessibilitySettings() {
            updateAccessibilitySettings();

            // Message de confirmation
            if (window.lunaVision) {
                window.lunaVision.showLunaMessage("Param√®tres d'accessibilit√© sauvegard√©s !", 3000);
            }

            // Sauvegarder sur le serveur (si API disponible)
            const settings = JSON.parse(localStorage.getItem('arkalia-accessibility') || '{}');
            fetch('/api/accessibility/save', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify(settings)
            }).catch(error => {
                console.log('API d\'accessibilit√© non disponible, sauvegarde locale uniquement');
            });
        }

        function resetAccessibilitySettings() {
            // R√©initialiser tous les contr√¥les
            document.querySelectorAll('.control-toggle').forEach(toggle => {
                toggle.classList.remove('active');
            });

            document.getElementById('font-size').value = 'medium';
            document.getElementById('element-spacing').value = 'normal';
            document.getElementById('effects-volume').value = 80;

            // R√©initialiser les param√®tres
            updateAccessibilitySettings();

            if (window.lunaVision) {
                window.lunaVision.showLunaMessage("Param√®tres r√©initialis√©s !", 3000);
            }
        }

        function testAccessibilitySettings() {
            // Test des param√®tres actuels
            const currentSettings = JSON.parse(localStorage.getItem('arkalia-accessibility') || '{}');

            let testMessage = "Test des param√®tres actuels :\n";
            testMessage += `‚Ä¢ Contraste √©lev√©: ${currentSettings.highContrast ? 'Activ√©' : 'D√©sactiv√©'}\n`;
            testMessage += `‚Ä¢ Taille du texte: ${currentSettings.fontSize || 'Moyen'}\n`;
            testMessage += `‚Ä¢ Animations r√©duites: ${currentSettings.reducedMotion ? 'Activ√©' : 'D√©sactiv√©'}\n`;
            testMessage += `‚Ä¢ Mode sombre: ${currentSettings.darkMode ? 'Activ√©' : 'D√©sactiv√©'}`;

            if (window.lunaVision) {
                window.lunaVision.showLunaMessage(testMessage, 5000);
            } else {
                alert(testMessage);
            }
        }

        // Charger les param√®tres sauvegard√©s au d√©marrage
        document.addEventListener('DOMContentLoaded', () => {
            const savedSettings = JSON.parse(localStorage.getItem('arkalia-accessibility') || '{}');

            // Appliquer les param√®tres sauvegard√©s
            if (savedSettings.highContrast) document.getElementById('high-contrast').classList.add('active');
            if (savedSettings.reducedMotion) document.getElementById('reduced-motion').classList.add('active');
            if (savedSettings.subtitles) document.getElementById('subtitles').classList.add('active');
            if (savedSettings.audioDescription) document.getElementById('audio-description').classList.add('active');
            if (savedSettings.keyboardNav) document.getElementById('keyboard-nav').classList.add('active');
            if (savedSettings.focusVisible) document.getElementById('focus-visible').classList.add('active');
            if (savedSettings.keyboardShortcuts) document.getElementById('keyboard-shortcuts').classList.add('active');
            if (savedSettings.darkMode) document.getElementById('dark-mode').classList.add('active');
            if (savedSettings.customCursor) document.getElementById('custom-cursor').classList.add('active');

            if (savedSettings.fontSize) document.getElementById('font-size').value = savedSettings.fontSize;
            if (savedSettings.elementSpacing) document.getElementById('element-spacing').value = savedSettings.elementSpacing;
            if (savedSettings.effectsVolume) document.getElementById('effects-volume').value = savedSettings.effectsVolume;

            // Appliquer les param√®tres
            updateAccessibilitySettings();

            // Animation du titre
            setTimeout(() => {
                const title = document.getElementById('accessibility-title');
                if (window.lunaVision && title) {
                    window.lunaVision.typeText(title, "‚ôø ACCESSIBILIT√â", 80);
                }
            }, 1000);

            // Animation du sous-titre
            setTimeout(() => {
                const subtitle = document.getElementById('accessibility-subtitle');
                if (window.lunaVision && subtitle) {
                    window.lunaVision.typeText(subtitle, "Personnalise ton exp√©rience de jeu", 40);
                }
            }, 2000);

            // Message de LUNA
            setTimeout(() => {
                if (window.lunaVision) {
                    window.lunaVision.showLunaMessage("Ton exp√©rience de jeu s'adapte √† tes besoins...", 4000);
                    window.lunaVision.setEmotion('caring');
                }
            }, 3000);

            // √âcouter les changements de param√®tres
            document.querySelectorAll('.control-input, .control-toggle').forEach(element => {
                element.addEventListener('change', updateAccessibilitySettings);
            });
        });
    </script>
</body>

</html>